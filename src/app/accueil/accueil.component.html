<p></p>
<div class="container col-md-12">
    <div class="panel panel-info">
        <div class="panel panel-heading"> <marquee><h1>GESTION DES REMONTEES</h1></marquee></div>
        <div class="panel panel-body">
            <table class="table">
                <thead class="thead-dark">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Phone</th>
                  <th scope="col">Service</th>
                  <th scope="col">operateur</th>
                  <th scope="col">Numéro</th>
                  <th scope="col">Montant</th>
                  <th scope="col">Date operation</th>
                  <th scope="col">Option</th>
                </tr>
              </thead>
              <tbody>
                     <tr *ngFor="let l of listRemonte; let i=index">
                            <td  *ngIf="l.handled == 0"><strong>{{l.id}}</strong></td>
                            <td  *ngIf="l.handled == 0"><strong>{{l.phone}}</strong></td>
                            <td *ngIf="l.service == 'orange money' && l.handled == 0"><strong *ngIf="getInfo(l,'requete')=='1'"> depot</strong><strong *ngIf="getInfo(l,'requete')=='2'">retrait</strong><strong *ngIf="getInfo(l,'requete')=='3'">retrait avec code</strong></td>

                            <td *ngIf="l.service == 'tigo cash' && l.handled == 0"><strong *ngIf="getInfo(l,'requete')=='2'"> depot</strong><strong *ngIf="getInfo(l,'requete')=='3'">retrait</strong><strong *ngIf="getInfo(l,'requete')=='4'">retrait avec code</strong></td>

                            <td  *ngIf="l.handled == 0" ><strong> {{l.service}}</strong></td>
                            
                            <td *ngIf="getInfo(l,'requete')=='1' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='1' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>
                           
                            <td *ngIf="getInfo(l,'requete')=='2' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='2' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>
                           
                            <td *ngIf="getInfo(l,'requete')=='3' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='3' && l.service == 'orange money' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>


                            <td *ngIf="getInfo(l,'requete')=='2' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='2' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>
                            

                            <td *ngIf="getInfo(l,'requete')=='3' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='3' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>


                            <td *ngIf="getInfo(l,'requete')=='4' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"numero")}}</strong></td>
                            <td *ngIf="getInfo(l,'requete')=='4' && l.service == 'tigo cash' && l.handled == 0"><strong>{{getInfo(l,"montant")}}</strong></td>

                            <td  *ngIf="l.handled == 0"><strong> {{l.dateOp}}</strong></td>
                            <td *ngIf="l.handled == 0" ><a  class="btn btn-primary"  (click)="getId(i);openModal(template)" style="margin-left: 5%;cursor: pointer;"  title="Traiter" ><strong> Traiter</strong></a>
                            </td>
                  </tbody>
                       
              </table>
              
        </div>
        <ng-template #template>
            <div class="modal-header">
              <h4 class="modal-title pull-left">Gestion remonte</h4>
              <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div>
                   <form  #patientForm="ngForm">
                      <div class="form-group">
                          
                          <ul class="list-group">
                             <strong>Numero</strong> <li class="list-group-item">{{montant}}</li>
                             <strong>Montant</strong> <li class="list-group-item">{{num}}</li>
                             <strong>date Operation</strong> <li class="list-group-item">{{dateOp}}</li>
                          </ul>
                         <label class="control-label">Resultat</label>
                         <select class="form-control" type="text" name="result" required
                         [(ngModel)]="result"
                         #name="ngModel"> 
                            <option value="">---------Selectionné--------</option>
                            <option *ngFor="let c of Result" >{{c.etat}}</option>
                        </select> 
                        <div *ngIf="result=='Echec'">
                                <label class="control-label">Cause</label>
                                <select class="form-control" type="text" name="cause" required
                                [(ngModel)]="cause"
                                #name="ngModel"> 
                                   <option value="">---------Selectionné--------</option>
                                   <option *ngFor="let c of Echec" >{{c.info}}</option>
                               </select> 
                            </div>   
                      </div>
                     <p></p>
                     <div class="form-group">
                       <input type="submit" class="btn btn-success" value="" (click)="remonter(listRemonte.id);modalRef.hide()" value="Valider">
                      </div>
                    </form>
              </div>
            </div>
          </ng-template>
    </div>
</div>